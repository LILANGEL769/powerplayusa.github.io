<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>State Polling</title>
    <!-- Add Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Include the SimpleMaps JavaScript files -->
    <script src="{{ url_for('static', filename='map/usmap.js') }}"></script>
    <script src="{{ url_for('static', filename='map/mapdata.js') }}"></script>

    <!-- Add your custom styles -->
    <style>
        body {
            padding: 50px;
        }
        h1 {
            text-align: center;
        }
        .state-link {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>State Polling</h1>

    {% if registered %}
        <!-- Include a form for withdrawing from presidential race -->
        <form action="{{ url_for('withdraw_presidential_candidate') }}" method="post">
            <input type="submit" value="Withdraw from Presidential Race">
        </form>
    {% else %}
        <!-- Include a form for registering a presidential candidate -->
        <form action="{{ url_for('register_presidential_candidate') }}" method="post">
            <input type="submit" value="Register for Presidential Race">
        </form>
    {% endif %}

    <!-- Display the list of candidates for each party -->
    <h2>Democrat Candidates</h2>
    <ul>
        {% for name, percent in democrat_candidates %}
            <li>{{ name }} - {{ percent }}%</li>
        {% endfor %}
    </ul>

    <h2>Republican Candidates</h2>
    <ul>
        {% for name, percent in republican_candidates %}
            <li>{{ name }} - {{ percent }}%</li>
        {% endfor %}
    </ul>

    <!-- Include the SimpleMaps div where the map will be displayed -->
    <div style="max-width: 700px">
        <div id="map"></div>
    </div>

    <div class="list-group">
        {% for state in states %}
            <a href="{{ url_for('electionstate', state_id=state.id) }}" class="list-group-item list-group-item-action state-link">{{ state.name }}</a>
        {% endfor %}
    </div>

    <!-- Initialize the SimpleMaps map -->
    <script>
        simplemaps_usmap_mapdata.state_specific = {{ state_data | tojson }};
        simplemaps_usmap.load();
    </script>
	<script>
simplemaps_usmap_mapdata = {
  main_settings: {
    width: "responsive",
    background_color: "#FFFFFF",
    background_transparent: "yes",
    label_color: "#d5ddec",
    border_color: "#ffffff",
    state_description: "State description",
    state_color: "#88A4BC",
    state_hover_color: "#3B729F",
    state_url: "http://simplemaps.com",
    border_size: 1.5,
    all_states_inactive: "no",
    all_states_zoomable: "yes",
    location_description: "Location description",
    location_color: "#FF0000",
    location_opacity: 0.8,
    location_url: "http://simplemaps.com",
    location_size: 25,
    location_type: "square",
    location_image_url: "",
    location_bg_color: "#FFFFFF",
    location_border_color: "#FFFFFF",
    location_border: 2,
    location_hover_border: 2.5,
    all_locations_inactive: "no",
    all_locations_hidden: "no",
    label_size: 22,
    label_hover_color: "#d5ddec",
    label_url: "http://simplemaps.com",
    default_locations: [
      {name: "sample", lat: 41.8781, lng: -87.6298, color: "default", description: "This is a sample location."}
    ]
  }
};

simplemaps_usmap.load();
</script>

</body>
</html>
